<div class="container">
    <p-toast [style]="{marginTop: '80px'}"></p-toast>

    <p-dialog header="Confirmation" [(visible)]="displayDialogBack" [responsive]="true" [style]="{ minWidth: '200px'}" [minY]="70"
              [maximizable]="false" [baseZIndex]="10000">
        <h3> Back to meeting list? </h3>
        <p>Please make sure to save before</p>
        <br />
        <p-footer>
            <button mat-raised-button color="primary" type="button" routerLink="/meeting-list" (click)="displayDialogBack = false;">
                Discard</button>
            <button mat-raised-button color="primary" type="button" (click)="displayDialogBack = false;">
                Ok</button>
        </p-footer>
    </p-dialog>

    <p-dialog header="Add card" [(visible)]="showAddCard" [responsive]="true" [style]="{ minWidth: '200px'}" [minY]="70"
              [maximizable]="false" [baseZIndex]="10000">
            <div >

                <div style="margin-left: 100px;">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAOCAYAAABZ/o57AAAAAXNSR0IArs4c6QAABLJJREFUSA2tVk1sVFUUPue+9+ZHZ94wibWmBTL2tSCVxBjF8LOQhUsWmmriQsPCNGFDGlphYYiZBGOt2EwLJhhjUNxIohsShVaDRhMrMUGjFVDT6Q8goRqhPzOlPzPv+p335s5MBVZ6knfP7z333PNzZziWyWVIl5jqwLapWMjv/7NOFJJN2Xti0USDkS9O/H4t3uw12vHIOpH5ZX+hONHzk9EHOJONJfxEi7KdDHHZ98m6WsjfvEiU9VfZCdPyRipO8ZSQt4rLf9P0/qLQAiqiVHvEiRyKOpGf8Y3LZ3FkOtU6cDw0qa1ufE1v1HIm5Yso5xxRE9ux6EFFakQ+y7LfNNap9b3plJfrS9npaSviXGBFnzFbZyym0ZSXHjZ2BrvewLGUis9EFE3J5yadA0YnWM2Nd52eG+t6YXbhZmNZ65Oa9LIotKbddF9fUugAkBkmftGwMDiGrCyjFJurMp9+CeiGbEI78WFiJYe5Vb0hWE8ZUrCb6d/KzHvqZaC31fOqylzLLljEb5HmeU2Ux0aVSNmPG72rUh3ElBYe+iWfV94RGsFXA4U8CDTppvZg/xbRAwo++Z3oiy0ln57ytT5Q9vXpUBWubNs99bzQrPkJJKIan11vMJvv+sFtHfRZ6yaYTjHZcthXwUalOqu22j8pPRz3+tch0qCnAhvSQaCKeIexRYWuzI/NfijZr8jOGp1gmRFU7xmWKdH6MvxZOLtZ/Ca8dHshH16+GnFlM5KiUTKOg3CZ9SMiT7b0bwB6smJDpZI/KLRDqpZNRDRXXLkY2vCYsUXGN7leejTRMtBhZPU4YnMXgkRwOJnpAyD0fghMulr+fweK0dVDYobNaa11MM2K7Vo2SX+zMNXzo9jourLjUhNmSvVSuRdxXxIbAfjaYCn+xPUGv403960NpVgx5UjkS8LjLH+5XDrua/rO6BXX+vS2QP2FW5+jFEioHMDb4s1H1uKmu81m9FeQzUBfN0jYEw4SFHNXu2/MjeUfxdmH4GjJ7EXA251Y9EuivVGRJTmKBLAZ2C8WJ17GkOlqRpGIu2e0cP2Vv2B8XhyhbLYT06/j1uHbqWmqMD5ySnQCkNdKXxmkUCPr0aW5/L5XV3SpDZcIqiRSXL7NbfV2omdt9PJekQnA12Vk/HmQbYFAFk0b5ZkT8raMihBQ55iqTxKm922ij8uhSTCRm0I6uNRoQGdya4xM8K18zxUEcbBehjIX0LfPIur1VTlzJzL+kWL1vpGBZ+3Etgq/auqNASo/BJtVznG94nyZ3jM2bkvaQxrihsfPTFB611bD7A1iOPyzWvN19O4DaJ0OBBsAfN+Yz1/63vXac0EejYO7Yyn/mTsGOp8fOZfydszgxtXsoNdO0OS+GeMPh2+uHU4rhfyF36BDEvTDWO9FsR4DIyIpawBogUXt+08nH3xIHnjzzlK5VN5ZwnNYMaOIxbugPyo8kwr69I6BSnk1bUcv8i5kEjFiLdMRwQbQMw1Q/BrwWo8TvbtCjYcRIA1hh7yjjUHp5I+E5j+QyVPLZZ1bnOyexM/lCfTfbOhLny9Mdn8d0pU1k/s0avFrFf1GYHPXVWb/E5O1E97h+4meC97I/+r0H2FHmUxT7+LTAAAAAElFTkSuQmCC" class="card-type__icon card-type__icon--disabled" ng-class="{'card-type__icon--disabled': !isVisa()}" />
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAUCAYAAAB1aeb6AAAAAXNSR0IArs4c6QAABABJREFUSA2VlW1ollUYx3/3NqduavlSyy3TTNecLy1RyxXMhBl9iJFazrcIIjKhzH2Q8MMMkdbLB0n60AsUZUQg+EItNPBjTjBMRytCnVubiZuxTXHNbe7ud/bwPDhm7dkFF+c+53r7n/+5zrkj/kNiiDQtUB9QJ6pX1HoX/3a8o8TfkEcmxWQ4xlxngGYqaTDGdMMlFBgiek1z4S11gzp9iBHTQZ36gYFHkrb4AM+bfrtwH3dtaM6YS658TS/vRRvpSMaEcYijhde49rk6KRhHkGM8y5ts5mOzlI3gG/beIfQXo0q+T/qmilt4q4sfqam1pNMdx4h2auhjFvlSnZ7Elo95JVo3uMFEIQuvNPpHNd00A2SbJkP/h43aqWao6Ugs4JinBPBTZOEsY35VQ5r0pJAT7KA05TzGr5zUbOSPmLP8xuJQfJ3e344ckfIY4C6xR7exdI+2d1L29D5iKsKuVzNvHpSX22r22qZN0NQER48OT5KbC1MnNLLjypxhxpuu3LdMfRrajnshTwxzSS3Mtr0ufvJc2Hkj1dUPsmuXMFbDwYOwd69n6CGGYnv2wNq1sHAhXLjgffBCrF8PVVVw3CKtrbDMoouuwsYPoXm/hetgymMeqGdx3h7Or4DO03D3Yui/7gF7k2vzGzLfhnfZujWLMR5cXp4BklFbK6RGWLUKiopgyxaoqYEVK6ChwQazw+osUF0NN91yZaVAvZ03vtOurftPW1fgecZPmAuzX/WF6JU1AY0vEECX7H6VFXq0h/nz4bTIZs6Evj4o0GHbtsRYXw8nTybm4XgOHYI5sh6YCDsvLobduwUt+O4m0yn3vwBzjQ+FMsfBJdnMMXfjp9BxCq79Hrx6MsjObmW6D9m5c3D4cCJxfr40dYp0KsyYAe3tMHlyYl5WlqC/pycREwCdOQN/GFuyD0rd/RSPobcDxk6zuNR3au9Si2Vq7na4bq3MiX9FcU7OPtG/TlubtN2AwsIEtWFHYR4kgDsl4gCqvz8m93LEo6Xu6KKF7oVfbK43bpl4aWKnnWd9I43vNz6SkX9aZLRL3yWO1zwq+6Pvxvuh4TwI5HUUstkmncXsVIQEIcOjkPDUlAw+pQKQMypGEXyLRd7z5EO8xkjZT1vizAOXx5e8lCwun8ir73S6spyfWc4SigywHUYhzXSPf+J8V8HVJHafLEpM8IPqAacpj0j/TukPdyYdiWmhn2eiDTQE91SYKGxH7JhBAMH2f9Kp8bXoLA85VoncLhpRjlh4abJw8E7t/PZQWXjSue8s5ap3DVt2sEAA6F3iMwNt34TEXzLVH8vLzioEssCskxx7nbc4HlP3+x8fXVOH1AIJN2Js+E5X4i8YF+JG8v8X5UMlkwCffwoAAAAASUVORK5CYII=" class="card-type__icon card-type__icon--disabled" ng-class="{'card-type__icon--disabled': !isMasterCard()}"/>
                </div>
                <br />
            </div>

            <mat-card>

                <span class="ui-float-label">
                    <input id="float-input1" type="number" size="16" pInputText [(ngModel)]="lastFourNumbers" required>
                    <label for="float-input1">CARD NUMBER</label>
                </span>
                <br />
                <span class="ui-float-label">
                    <input id="float-input2" type="text" size="30" pInputText [(ngModel)]="card.nameSurname" required>
                    <label for="float-input2">NAME ON CARD</label>
                </span>
                <br />
                <span class="ui-float-label">
                    <input id="float-input3" type="month"  pInputText [(ngModel)]="card.dataOfExpire" required>
                    <label for="float-input3">MONTH/YYYY</label>
                </span>
                <br />
                <span class="ui-float-label">
                    <input id="float-input4" type="number" maxlength="3" style="width: 60px;" pInputText [(ngModel)]="CVV" required>
                    <label for="float-input4">CVV</label>
                </span>
                <br />

                    <mat-card-actions>
                        <button mat-raised-button color="primary" (click)="saveCard()"
                                [disabled]="!lastFourNumbers||!card.nameSurname||!card.dataOfExpire||!CVV" >Save</button>

                        <a mat-button (click)="showAddCard=false;" >Cancel</a>
                    </mat-card-actions>


            </mat-card>
    </p-dialog>

    <p-dialog [(visible)]="openMap" [responsive]="true" [style]="{ minWidth: '200px'}" [minY]="70"
              [maximizable]="false" [baseZIndex]="10000">

        <p-gmap #gmap [style]="{'width':'600px','height':'320px', 'margin-bottom': '1em'}" [options]="options" [overlays]="overlays"
                (onMapClick)="handleMapClick($event)" (onOverlayDragEnd)="handleDragEnd($event)"></p-gmap>

        <button mat-raised-button color="primary" type="button" (click)="clear()">
            Clean</button>
        <button mat-raised-button color="primary" type="button" (click)="zoomIn(gmap.getMap())" style="margin-left: 10px">
            <mat-icon>zoom_in</mat-icon></button>
        <button mat-raised-button color="primary" type="button" (click)="zoomOut(gmap.getMap())" style="margin-left: 10px">
            <mat-icon>zoom_out</mat-icon></button>

        <p-dialog showEffect="fade" [(visible)]="dialogVisible" header="New Location">
            <div class="ui-g ui-fluid" *ngIf="selectedPosition">
                <div class="ui-g-2"><label for="title">Label</label></div>
                <div class="ui-g-10"><input type="text" pInputText id="title" [(ngModel)]="markerTitle"></div>

                <div class="ui-g-2"><label for="lat">Lat</label></div>
                <div class="ui-g-10"><input id="lat" type="text" readonly pInputText [ngModel]="selectedPosition.lat()"></div>

                <div class="ui-g-2"><label for="lng">Lng</label></div>
                <div class="ui-g-10"><input id="lng" type="text" readonly pInputText [ngModel]="selectedPosition.lng()"></div>
            </div>
            <p-footer>
                <div class="ui-dialog-buttonpane ui-helper-clearfix">
                    <button mat-raised-button color="primary" type="button" [disabled]="!markerTitle"
                            (click)="addMarker()">
                        Add</button>
                </div>
            </p-footer>
        </p-dialog>
    </p-dialog>


    <mat-card>
        <mat-card-header background-color="accent">
            <mat-card-actions>
                <button mat-raised-button color="primary" (click)="backToList()"
                        style="margin-right: 20px"><mat-icon>subdirectory_arrow_left</mat-icon>
                </button>
            </mat-card-actions>
            <h1 class = "myFont" style="margin-left: 200px;">Create your meeting</h1>
        </mat-card-header>
        <mat-card-content >
            <br />
            <p-steps [model]="items"
                     [(activeIndex)]="activeIndex" [readonly]="true"></p-steps>
            <br />
            <div>

                <mat-card-content *ngIf="activeIndex===0" style="margin-left: 50px;">
                <h3 class="first">Meeting Title</h3>
                <input size="30" pInputText [(ngModel)]="meeting.meetingName" required>
                <h3 class="first">Description</h3>
                <textarea [rows]="5" [cols]="106" pInputTextarea autoResize="autoResize"
                          [(ngModel)]="meeting.meetingDescription" required></textarea>
                <button mat-raised-button color="primary" type="button"
                        (click)="activeIndex=activeIndex+1" style="margin-left: 700px; margin-top: 50px;"
                        [disabled]="!meeting.meetingName">Next</button>
                </mat-card-content>

                <mat-card-content *ngIf="activeIndex===1" style="margin-left: 30px;">
                    <mat-card-actions>
                        <button mat-button color="primary" type="button"
                                (click)="activeIndex=0" >
                            <mat-icon>arrow_back</mat-icon>
                        </button>
                    </mat-card-actions>
                    <div style="margin-left: 20px;">
                        <h3 class="first">Date</h3>
                        <p-calendar [(ngModel)]="meeting.dateOfMeeting" [showIcon]="true" [minDate]="minDate" dateFormat="dd/mm/yy" >

                        </p-calendar>

                        <h3 class="first">Time</h3>
                        <p-calendar [(ngModel)]="meeting.timeOfMeeting" [timeOnly]="true" >

                        </p-calendar>

                        <h3 class="first">Place</h3>
                        <input size="20" pInputText [(ngModel)]="markerTitle" [disabled]="true">

                        <button mat-raised-button color="primary" (click)="openMap=!openMap;"
                        style="margin-left: 10px;"> Map
                        </button>

                        <p-toast [style]="{marginTop: '80px'}"></p-toast>


                        <button mat-raised-button color="primary" type="button"
                            (click)="activeIndex=activeIndex+1" style="margin-left: 700px; margin-top: 50px;"
                            >Next</button>
                    </div>
                </mat-card-content>

                <mat-card-content *ngIf="activeIndex===2" style="margin-left: 20px;">
                    <mat-card-actions>
                    <button mat-button color="primary" (click)="activeIndex=1" >
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    </mat-card-actions>

                    <div style="margin-left: 30px;">
                        <mat-card-header background-color="accent">
                            <h2  style="margin-left: 200px" >Invite friends </h2>
                            <mat-card-actions>
                                <button mat-raised-button style="margin-left: 370px" (click)="add()"
                                        [disabled]="!fixedUser">Invite</button>
                            </mat-card-actions>
                        </mat-card-header>

                        <mat-card-content style="margin-left: 150px;">

                            <mat-list>
                                <mat-list-item *ngFor="let user of users">
                                    <img mat-list-avatar src="{{user.avatarUrl}}" onerror="this.src='./user.png';">
                                    <h3 mat-line>
                                        <a mat-raised-button (click)="fix(user)" style="background-color: white!important;
                                        color: black!important;"
                                           [style.width]="'200px'"
                                           [style.border-style]="user.id === fixedUserId? 'solid':'ridge'">{{user.name}}</a>
                                    </h3>
                                </mat-list-item>
                            </mat-list>
                        </mat-card-content>

                        <button mat-raised-button color="primary" type="button" [disabled]="!participants.length"
                                (click)="activeIndex=activeIndex+1" style="margin-left: 700px; margin-top: 50px;"
                        >Next</button>
                    </div>
                </mat-card-content>

                <mat-card-content *ngIf="activeIndex===3" style="margin-left: 20px;">
                    <!--<mat-card-actions>-->
                    <!--<button mat-button color="primary" (click)="activeIndex=2" >-->
                        <!--<mat-icon>arrow_back</mat-icon>-->
                    <!--</button>-->
                    <!--</mat-card-actions>-->
                    <!--<div flex style="margin-left: 300px; margin-top: 10px; height: fit-content;">-->
                    <!--<div style="float: left; width: 300px;">-->
                        <!--<mat-card style="  height: fit-content">-->
                        <!--<h3 style="color: steelblue;">Meeting title: <span style="font-size: small; color: black">-->
                            <!--{{meeting.meetingName}}</span>-->
                        <!--</h3>-->
                        <!--<br />-->
                        <!--<h3 style="color: steelblue;">Meeting date: <span style="font-size: small; color: black">-->
                            <!--{{meeting.dateOfMeeting? parse(meeting.dateOfMeeting.toString()): "No date"}}-->
                        <!--</span>-->
                        <!--</h3>-->
                        <!--<br />-->
                        <!--<h3 style="color: steelblue;">Meeting time: <span style="font-size: small; color: black">-->
                            <!--{{meeting.timeOfMeeting? meeting.timeOfMeeting.getHours(): "No time"}}-->
                            <!--{{meeting.timeOfMeeting? ":": ""}}-->
                            <!--{{meeting.timeOfMeeting? meeting.timeOfMeeting.getMinutes(): ""}} </span>-->
                        <!--</h3>-->
                        <!--<br />-->
                        <!--<h3 style="color: steelblue;">Meeting location: <span style="font-size: small; color: black">-->
                            <!--{{markerTitle? markerTitle: "No location"}}</span>-->
                        <!--</h3>-->
                        <!--<br />-->
                        <!--</mat-card>-->

                    <!--</div>-->
                        <!--<button mat-raised-button color="primary" type="button"-->
                                <!--(click)="createMeeting()" style="margin-left: 200px; margin-top: 300px;"-->
                        <!--&gt;Create</button>-->

                    <mat-card-actions>
                    <button mat-button color="primary" (click)="activeIndex=2" >
                    <mat-icon>arrow_back</mat-icon>
                    </button>
                    </mat-card-actions>

                    <div flex style="margin-left: 100px; margin-top: 10px; height: fit-content;">
                        <div class="ui-g">
                            <div style="float: left; width: 300px;" class="ui-g-8">
                                <mat-card style="  height: fit-content">
                                    <h3 style="color: steelblue;">Meeting title: <span style="font-size: small; color: black">
                                        {{meeting.meetingName}}</span>
                                    </h3>
                                    <br />
                                    <h3 style="color: steelblue;">Meeting date: <span style="font-size: small; color: black">
                                        {{meeting.dateOfMeeting? parse(meeting.dateOfMeeting.toString()): "No date"}}
                                    </span>
                                    </h3>
                                    <br />
                                    <h3 style="color: steelblue;">Meeting time: <span style="font-size: small; color: black">
                                        {{meeting.timeOfMeeting? meeting.timeOfMeeting.getHours(): "No time"}}
                                        {{meeting.timeOfMeeting? ":": ""}}
                                        {{meeting.timeOfMeeting? meeting.timeOfMeeting.getMinutes(): ""}} </span>
                                    </h3>
                                    <br />
                                    <h3 style="color: steelblue;">Meeting location: <span style="font-size: small; color: black">
                                        {{markerTitle? markerTitle: "No location"}}</span>
                                    </h3>
                                    <br />
                                </mat-card>
                            </div>

                            <!--Add meeting picture-->
                            <div class="ui-g-4">
                                <div>
                                    <img src="{{currentAvatarUrl}}" class="meeting-img">
                                </div>
                                <div style="margin-top: 10px;">
                                    <input #file id="file" type="file" accept='image/*' (change)="onSelectFile(file.files)" style="vertical-align: top; margin-right: 10px;"
                                           class="inputfile"/>
                                    <label for="file" style="vertical-align: top; margin-right: 10px;" class="custom-inputfile">
                                        Change...
                                    </label>
                                    <label style="vertical-align: top;" class="custom-inputfile" (click)="clearAvatar()">Clear</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button mat-raised-button color="primary" type="button"
                            (click)="createMeeting()" style="margin-left: 800px;"
                    >Create</button>

                </mat-card-content>


            </div>

        </mat-card-content>
    </mat-card>
</div>
